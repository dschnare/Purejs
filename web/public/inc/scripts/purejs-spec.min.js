/*
Author: Darren Schnare
Keywords: Keywords: javascript,constructor,inheritence,mixin,pure,type,testing
License: MIT ( http://www.opensource.org/licenses/mit-license.php )
Repo: https://github.com/dschnare/purejs
*/
(function(n){"use strict";var r=function(n,t){return{wildCardAdheresToTest:function(){t.expect('object to adhereTo {age: "*"}.',n.adheresTo({age:23},{age:"*"})),t.dontExpect('object to adhereTo {age: "*"}.',n.adheresTo({age:undefined},{age:"*"})),t.expect('object to adhereTo {age: "*"}.',n.adheresTo({age:null},{age:"*"})),t.expect('object to adhereTo {age: "*"}.',n.adheresTo({age:{}},{age:"*"})),t.dontExpect('object to adhereTo {age: "*"}.',n.adheresTo({},{age:"*"}))},adherenceTest:function(){t.expect("object to adhereTo Object.prototype.",n.adheresTo({},Object.prototype)),t.expect('object to adhereTo {name: "string", age: "number"}.',n.adheresTo({name:"Darren",age:29},{name:"string",age:"number"}))}}}(n,window.unit),u=function(n,t){return{emptyConstructorTest:function(){var i=n.constructor.create(),f=i,r=new i,u=f();t.expect("Ctr to be a function.",typeof i=="function"),t.expect("o to be an instance of Ctr.",r instanceof i),t.expect("j to be an instance of Ctr.",u instanceof i),typeof Object.prototype.isPrototypeOf=="function"&&(t.expect("Ctr.prototype is a prototype of o.",i.prototype.isPrototypeOf(r)),t.expect("Ctr.prototype is a prototype of j.",i.prototype.isPrototypeOf(u))),typeof Object.getPrototypeOf=="function"&&(t.expect("prototype of o is equal to Ctr.prototype.",Object.getPrototypeOf(r)===i.prototype),t.expect("prototype of j is equal to Ctr.prototype.",Object.getPrototypeOf(u)===i.prototype)),t.expect('Ctr.getName() equal to "UnnamedConstructor".',i.getName()==="UnnamedConstructor")},simpleConstructorTest:function(){var i=n.constructor.create("CTR"),f=i,r=new i,u=f();t.expect("Ctr to be a function.",typeof i=="function"),t.expect("o to be an instance of Ctr.",r instanceof i),t.expect("j to be an instance of Ctr.",u instanceof i),typeof Object.prototype.isPrototypeOf=="function"&&(t.expect("Ctr.prototype is a prototype of o.",i.prototype.isPrototypeOf(r)),t.expect("Ctr.prototype is a prototype of j.",i.prototype.isPrototypeOf(u))),typeof Object.getPrototypeOf=="function"&&(t.expect("prototype of o is equal to Ctr.prototype.",Object.getPrototypeOf(r)===i.prototype),t.expect("prototype of j is equal to Ctr.prototype.",Object.getPrototypeOf(u)===i.prototype)),t.expect('Ctr.getName() equal to "CTR".',i.getName()==="CTR")},copyConstructorTest:function(){var r=n.constructor.create({copy:function(){this.copyCalled=!0,this.init()},init:function(){this.initCalled=!0},helloWorld:function(){return"Hello World"}},"CTR"),i=new r,u=i.constructor(i);t.dontExpect("a to be identical to b.",i===u),t.expect("a.initCalled to be true.",i.initCalled===!0),t.dontExpect("a.copyCalled to be true.",i.copyCalled===!0),t.expect("b.initCalled to be true.",u.initCalled===!0),t.expect("b.copyCalled to be true.",u.copyCalled===!0),t.expect("a to be an instance of Ctr.",i instanceof r),t.expect("b to be an instance of Ctr.",u instanceof r),typeof Object.prototype.isPrototypeOf=="function"&&(t.expect("Ctr.prototype is a prototype of a.",r.prototype.isPrototypeOf(i)),t.expect("Ctr.prototype is a prototype of b.",r.prototype.isPrototypeOf(u))),typeof Object.getPrototypeOf=="function"&&(t.expect("prototype of a is equal to Ctr.prototype.",Object.getPrototypeOf(i)===r.prototype),t.expect("prototype of b is equal to Ctr.prototype.",Object.getPrototypeOf(u)===r.prototype)),t.expect('Ctr.getName() equal to "CTR".',r.getName()==="CTR")},membersTest:function(){var f=!1,i=n.constructor.create({init:function(){f=!0},helloWorld:function(){return"Hello World"}},"CTR"),e=i,r=new i,u=e();t.expect("Ctr to be a function.",typeof i=="function"),t.expect("o to be an instance of Ctr.",r instanceof i),t.expect("j to be an instance of Ctr.",u instanceof i),typeof Object.prototype.isPrototypeOf=="function"&&(t.expect("Ctr.prototype is a prototype of o.",i.prototype.isPrototypeOf(r)),t.expect("Ctr.prototype is a prototype of j.",i.prototype.isPrototypeOf(u))),typeof Object.getPrototypeOf=="function"&&(t.expect("prototype of o is equal to Ctr.prototype.",Object.getPrototypeOf(r)===i.prototype),t.expect("prototype of j is equal to Ctr.prototype.",Object.getPrototypeOf(u)===i.prototype)),t.expect('Ctr.getName() equal to "CTR".',i.getName()==="CTR"),t.expect("initCalled to be true.",f),t.expect('o.helloWorld() equal to "Hello World".',r.helloWorld()==="Hello World"),t.expect("o to adhere to Ctr.prototype.",n.adheresTo(r,i.prototype))},baseMembersTest:function(){var f=!1,e=!1,r=n.constructor.create({init:function(n){this.name=n,f=!0},getName:function(){return this.name},helloWorld:function(){return"Hello World"}},"Person"),u=n.constructor.create(r,{init:function(n){e=!0,r.prototype.init.call(this,n)},getName:function(){return r.prototype.getName.call(this)+" is a Ninja!"}},"Ninja"),o=u,i=o("Darren");t.expect("ninja to be an instance of Ninja.",i instanceof u),t.expect("ninja to be an instance of Person.",i instanceof r),typeof Object.prototype.isPrototypeOf=="function"&&(t.expect("Ninja.prototype is a prototype of ninja.",u.prototype.isPrototypeOf(i)),t.expect("Person.prototype is a prototype of ninja.",r.prototype.isPrototypeOf(i))),typeof Object.getPrototypeOf=="function"&&(t.expect("prototype of ninja is equal to Ninja.prototype.",Object.getPrototypeOf(i)===u.prototype),t.dontExpect("prototype of ninja is equal to Person.prototype.",Object.getPrototypeOf(i)===r.prototype)),t.expect('ninja.getName() equal to "Darren is a Ninja".',i.getName()==="Darren is a Ninja!"),t.expect('Ninja.getName() equal to "Ninja".',u.getName()==="Ninja"),t.expect("personInitCalled to be true.",f),t.expect("ninjaInitCalled to be true.",e),t.expect('ninja.helloWorld() equal to "Hello World".',i.helloWorld()==="Hello World"),t.expect('ninja.helloWorld() equal to "Hello World".',i.helloWorld()==="Hello World"),t.expect("ninja to adhere to Ninja.prototype.",n.adheresTo(i,u.prototype)),t.expect("ninja to adhere to Person.prototype.",n.adheresTo(i,r.prototype))}}}(n,window.unit),t=function(n,t){return{setupOwnPropertyTest:function(){function n(n){function t(){}return t.prototype=n,new t}this.a={name:"Ninja",age:300},this.b=n(this.a),this.b.stars=800,this.b.health=1e3},ownPropertyTest:function(){var i=n.mixin({},this.b);t.expect("o.stars to be equal to b.stars.",i.stars===this.b.stars),t.expect("o.health to equal to b.health.",i.health===this.b.health),t.dontExpect("o.name to be equal to a.name.",i.name===this.a.name),t.dontExpect("o.age to be equal to a.age.",i.age===this.a.age)},destroyOwnPropertyTest:function(){delete this.a,delete this.b},setupOverwritePropertyTest:function(){this.setupOwnPropertyTest()},overwritePropertyTest:function(){this.b.age=3500;var i=n.mixin(this.a,this.b);t.expect("o.name to be equal to a.name.",i.name===this.a.name),t.expect("o.age to be equal to 3500.",i.age===3500)},destroyOverwritePropertyTest:function(){this.destroyOwnPropertyTest()},objectCreationTest:function(){var i={},r;t.expect("o to be an object.",typeof i=="object"),r=n.mixin(i,{age:45}),t.expect("o to be the same object as j.",i===r),t.expectToThrow("pure.mixin() to throw an error.",function(){n.mixin()}),t.expectToThrow("pure.mixin(null, {age: 45}) to throw an error.",function(){n.mixin(null,{age:45})})}}}(n,window.unit),i=function(n,t){var r=String,i=Number,f=Boolean,u=Array;return{isStringTest:function(){t.expect("string literal to be a string.",n.isString("some string literal")),t.expect("string object to be a string.",n.isString(new r("some string literal"))),t.dontExpect("number literal to be a string.",n.isString(4)),t.dontExpect("number object to be a string.",n.isString(new i(4))),t.dontExpect("array literal to be a string.",n.isString([1,2,3]))},isBooleanTest:function(){t.expect("boolean literal to be a boolean.",n.isBoolean(!0)),t.expect("boolean object to be a boolean.",n.isBoolean(!1)),t.dontExpect("number literal to be a boolean.",n.isBoolean(4)),t.dontExpect("number object to be a boolean.",n.isBoolean(new i(4))),t.dontExpect("array literal to be a boolean.",n.isBoolean([1,2,3])),t.dontExpect("string literal to be a boolean.",n.isBoolean("some string literal"))},isNumberTest:function(){t.expect("number literal integer to be a number.",n.isNumber(0)),t.expect("number literal float to be a number.",n.isNumber(12.23)),t.expect("number literal exponent to be a number.",n.isNumber(12e4)),t.expect("number object to be a number.",n.isNumber(new i(12.34))),t.dontExpect("array literal to be a number.",n.isNumber([1,2,3])),t.dontExpect("string literal to be a number.",n.isNumber("some string literal")),t.dontExpect("string object to be a number.",n.isNumber(new r("some string literal")))},setupIsFunctionTest:function(){var n=function(){};n.prototype=Function.prototype,this.functionObject=new n},isFunctionTest:function(){t.expect("function literal to be a function.",n.isFunction(function(){})),t.expect("function property to be a function.",n.isFunction(t.makeTestSuite)),t.dontExpect("function object to be a function.",n.isFunction(this.functionObject)),t.dontExpect("number literal to be a function.",n.isFunction(10))},destroyIsFunctionTest:function(){delete this.functionObject},setupIsArrayTest:function(){this.arrayLikeObject={length:0,push:function(){}};var n=function(){};n.prototype=Array.prototype,this.extendedArrayObject=new n},isArrayTest:function(){t.expect("array literal to be an array.",n.isArray([1,2,3])),t.expect("array object to be an array.",n.isArray(new u(3))),t.expect("array-like object to be an array.",n.isArray(this.arrayLikeObject)),t.expect("extended array object to be an array.",n.isArray(this.extendedArrayObject)),t.dontExpect("number literal to be an array.",n.isArray(33.33)),t.dontExpect("string literal to be an array.",n.isArray("some string literal")),t.dontExpect("string object to be an array.",n.isArray(new r("some string literal")))},destroyIsArrayTest:function(){delete this.arrayLikeObject,delete this.extendedArrayObject},setupIsObjectTest:function(){this.setupIsArrayTest()},isObjectTest:function(){t.expect("object literal to be an object.",n.isObject({key:"value"})),t.expect("number object to be an object.",n.isObject(new i(4))),t.expect("string object to be an object.",n.isObject(new r("4"))),t.expect("boolean object to be an object.",n.isObject(new f(!1))),t.expect("array literal to be an object.",n.isObject([1,2,3])),t.expect("array object to be an object.",n.isObject(new u(3))),t.expect("extended array object to be an object.",n.isObject(this.extendedArrayObject)),t.expect("array-like object to be an object.",n.isObject(this.arrayLikeObject)),t.dontExpect("number literal to be an object.",n.isObject(1)),t.dontExpect("string literal to be an object.",n.isObject("1")),t.dontExpect("boolean literal to be an object.",n.isObject(!1))},destroyIsObjectTest:function(){this.destroyIsArrayTest()},isDefinedTest:function(){t.expect("string literal to be defined.",n.isDefined("string")),t.expect("number literal to be defined.",n.isDefined(45)),t.expect("array literal to be defined.",n.isDefined([2,3,4])),t.dontExpect("undefined to be defined.",n.isDefined(undefined)),t.dontExpect("null to be defined.",n.isDefined(null))},isUndefinedTest:function(){t.expect("undefined to be undefined.",n.isUndefined(undefined)),t.expect("null to be undefined.",n.isUndefined(null)),t.dontExpect("string literal to be undefined.",n.isUndefined("string")),t.dontExpect("number literal to be undefined.",n.isUndefined(45)),t.dontExpect("array literal to be undefined.",n.isUndefined([2,3,4]))},typeOfTest:function(){t.expect('number literal to be typeof "number".',n.typeOf(34)==="number"),t.expect('string literal to be typeof "string".',n.typeOf("string")==="string"),t.expect('boolean literal to be typeof "boolean".',n.typeOf(!0)==="boolean"),t.expect('function literal to be typeof "function".',n.typeOf(function(){})==="function"),t.expect('number object to be typeof "object".',n.typeOf(new i(34))==="object"),t.expect('string object to be typeof "object".',n.typeOf(new r("string"))==="object"),t.expect('boolean object to be typeof "object".',n.typeOf(new f(!0))==="object"),t.expect('null to be typeof "null".',n.typeOf(null)==="null"),t.expect('undefined to be typeof "undefined".',n.typeOf(undefined)==="undefined"),t.expect('array literal to be typeof "array".',n.typeOf([1,2,3])==="array")}}}(n,window.unit);unit.makeTestHarness("Purejs Test Harness","AdheresTo Test Suite",r,"Constructor Test Suite",u,"Mixin Test Suite",t,"Type Test Suite",i).run()})(window.PURE)